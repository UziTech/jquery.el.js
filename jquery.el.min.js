!function(e){function a(e){switch(e){case null:return;case"#":return{type:"id",value:""};case".":return{type:"class",value:""};case"[":return{type:"attrs",value:""};case"{":return{type:"text",value:""};default:throw"'"+e+"' is not a valid start of a token"}}function t(e,a){a=a.trim();for(var t="next",l=!1,s=!1,n={name:"",value:""},i=0;i<=a.length;i++){var u=null;if(i<a.length)switch(u=a[i],t){case"name":if("="===u)t="equals",s=!1;else if(/\s/.test(u))s=!0;else if(s){if(e[n.name]="",n={name:"",value:""},s=!1,t="name",!/[\w-]/.test(u))throw"'"+u+"' is not a valid attribute name character";n.name+=u}else{if(!/[\w-]/.test(u))throw"'"+u+"' is not a valid attribute name character";n.name+=u}break;case"equals":/\s/.test(u)||(/["']/.test(u)?(l=u,t="value"):(n.value+=u,t="value"));break;case"value":if(l)if("\\"===u)if(a.length>i+1){var r=a[i+1];switch(r){case"\\":case"'":case'"':n.value+=r,i++;break;default:n.value+=u}}else n.value+=u;else u===l?(l=!1,e[n.name]=n.value,n={name:"",value:""},t="next"):n.value+=u;else if("\\"===u)if(a.length>i+1){var v=a[i+1];switch(v){case"\\":n.value+=v,i++;break;default:n.value+=u}}else n.value+=u;else/\s/.test(u)?(e[n.name]=n.value,n={name:"",value:""},t="next"):n.value+=u;break;case"next":if(/[\w-]/.test(u))s=!1,n.name+=u,t="name";else if(/[^\s]/.test(u))throw"'"+u+"' is not a valid attribute name character";break;default:throw"'"+t+"' is an invalid token"}else n.name&&(e[n.name]=n.value)}return e}function l(e){if("undefined"==typeof e&&(e=""),"string"!=typeof e)throw"invalid input";e=e.trim();for(var l={tag:"div",id:null,classes:[],attrs:{},text:""},s={type:"tag",value:""},n=0;n<=e.length;n++){var i=null;switch(n<e.length&&(i=e[n]),s.type){case"tag":i&&/\w/.test(i)?s.value+=i:(s.value&&(l.tag=s.value),s=a(i));break;case"id":if(i&&/[\w-]/.test(i))s.value+=i;else{if(!s.value)throw null===i?"id cannot be empty":"'"+i+"' is not a valid id character";if(l.id)throw"cannot have multiple ids";l.id=s.value,s=a(i)}break;case"class":if(i&&/[\w-]/.test(i))s.value+=i;else{if(!s.value)throw null===i?"class cannot be empty":"'"+i+"' is not a valid class character";l.classes.push(s.value),s=a(i)}break;case"attrs":if(null===i)throw"missing ']' at end of attributes token";if("\\"===i)if(e.length>n+1){var u=e[n+1];switch(u){case"\\":s.value+="\\\\",n++;break;case"]":s.value+=u,n++;break;default:s.value+=i}}else s.value+=i;else/[^\]]/.test(i)?s.value+=i:(t(l.attrs,s.value),s={type:"next"});break;case"text":if(null===i)throw"missing '}' at end of text token";if("\\"===i)if(e.length>n+1){var r=e[n+1];switch(r){case"\\":case"}":s.value+=r,n++;break;default:s.value+=i}}else s.value+=i;else/[^}]/.test(i)?s.value+=i:(l.text=s.value,s={type:"next"});break;case"next":i&&(s=a(i));break;default:throw"'"+s.type+"' is not a valid token type"}}return l}e.el=function(a){var t=l(a),s=e("<"+t.tag+" />");return t.id&&s.attr({id:t.id}),t.classes.length>0&&s.addClass(t.classes.join(" ")),t.attrs&&s.attr(t.attrs),t.text&&s.text(t.text),s},e.fn.el=function(a){var t=e.el(a);return this.append(t),t}}(jQuery);
