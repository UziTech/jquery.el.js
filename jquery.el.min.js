!function(e){function a(e){return/[#.[{\s]/.test(e)}function t(e){if(/\s/.test(e))return{type:"whitespace"};switch(e){case null:return;case"#":return{type:"id",value:""};case".":return{type:"class",value:""};case"[":return{type:"attrs",value:""};case"{":return{type:"text",value:""};default:throw new Error("'"+e+"' is not a valid start of a token")}}function l(e,a){a=a.trim();for(var t="next",l=!1,s=!1,r={name:"",value:""},n=0;n<=a.length;n++){var u=null;if(n<a.length)switch(u=a[n],t){case"name":if("="===u)t="equals",s=!1;else if(/\s/.test(u))s=!0;else if(s){if(e[r.name]="",r={name:"",value:""},s=!1,t="name",!/[\w-]/.test(u))throw new Error("'"+u+"' is not a valid attribute name character");r.name+=u}else{if(!/[\w-]/.test(u))throw new Error("'"+u+"' is not a valid attribute name character");r.name+=u}break;case"equals":/\s/.test(u)||(/["']/.test(u)?(l=u,t="value"):(r.value+=u,t="value"));break;case"value":if(l)if("\\"===u)if(a.length>n+1){var i=a[n+1];switch(i){case"\\":case"'":case'"':r.value+=i,n++;break;default:r.value+=u}}else r.value+=u;else u===l?(l=!1,e[r.name]=r.value,r={name:"",value:""},t="next"):r.value+=u;else if("\\"===u)if(a.length>n+1){var v=a[n+1];switch(v){case"\\":r.value+=v,n++;break;default:r.value+=u}}else r.value+=u;else/\s/.test(u)?(e[r.name]=r.value,r={name:"",value:""},t="next"):r.value+=u;break;case"next":if(/[\w-]/.test(u))s=!1,r.name+=u,t="name";else if(/[^\s]/.test(u))throw new Error("'"+u+"' is not a valid attribute name character");break;default:throw new Error("'"+t+"' is an invalid token")}else r.name&&(e[r.name]=r.value)}return e}function s(e){for(var s={tag:"div",id:null,classes:[],attrs:{},text:""},r={type:"tag",value:""},n=0;n<=e.length;n++){var u=null;switch(n<e.length&&(u=e[n]),r.type){case"whitespace":u&&/\S/.test(u)&&(r=t(u));break;case"tag":if("\\"===u)if(e.length>n+1){var i=e[n+1];"\\"===i||a(i)&&/\S/.test(i)?(r.value+=i,n++):r.value+=u}else r.value+=u;else if(u&&!a(u))r.value+=u;else{if(r.value){if(/^[0-9]/.test(r.value))throw new Error("Tag cannot start with a number.");s.tag=r.value}r=t(u)}break;case"id":if("\\"===u)if(e.length>n+1){var v=e[n+1];"\\"===v||a(v)&&/\S/.test(v)?(r.value+=v,n++):r.value+=u}else r.value+=u;else if(u&&!a(u))r.value+=u;else{if(!r.value)throw new Error("id cannot be empty");if(s.id)throw new Error("cannot have multiple ids");s.id=r.value,r=t(u)}break;case"class":if("\\"===u)if(e.length>n+1){var c=e[n+1];"\\"===c||a(c)&&/\S/.test(c)?(r.value+=c,n++):r.value+=u}else r.value+=u;else if(u&&!a(u))r.value+=u;else{if(!r.value)throw new Error("class cannot be empty");s.classes.push(r.value),r=t(u)}break;case"attrs":if(null===u)throw new Error("missing ']' at end of attributes token");if("\\"===u)if(e.length>n+1){var f=e[n+1];switch(f){case"\\":r.value+="\\\\",n++;break;case"]":r.value+=f,n++;break;default:r.value+=u}}else r.value+=u;else/[^\]]/.test(u)?r.value+=u:(l(s.attrs,r.value),r={type:"next"});break;case"text":if(null===u)throw new Error("missing '}' at end of text token");if("\\"===u)if(e.length>n+1){var o=e[n+1];switch(o){case"\\":case"}":r.value+=o,n++;break;default:r.value+=u}}else r.value+=u;else/[^}]/.test(u)?r.value+=u:(s.text+=r.value,r={type:"next"});break;case"next":u&&(r=t(u));break;default:throw new Error("'"+r.type+"' is not a valid token type")}}return s}e.el=function(a){void 0===a||null===a?a="":"function"==typeof a&&(a=a.call(this)),a=(""+a).trim();var t=s(a),l=e("<"+t.tag+" />");return t.id&&l.attr({id:t.id}),t.classes.length>0&&l.addClass(t.classes.join(" ")),t.attrs&&l.attr(t.attrs),t.text&&l.text(t.text),l},e.fn.el=function(a,t){var l=e.el.call(this,a).appendTo(this);return t?this:l}}(jQuery);