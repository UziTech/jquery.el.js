!function(e){function t(e){return/[#.[{\s]/.test(e)}function a(e){if(/\s/.test(e))return{type:"whitespace"};switch(e){case null:return;case"#":return{type:"id",value:""};case".":return{type:"class",value:""};case"[":return{type:"attrs",value:""};case"{":return{type:"text",value:""};default:throw new Error("'"+e+"' is not a valid start of a token")}}function l(e,t){t=t.trim();for(var a="next",l=!1,s=!1,r={name:"",value:""},n=0;n<=t.length;n++){var i=null;if(n<t.length)switch(i=t[n],a){case"name":if("="===i)a="equals",s=!1;else if(/\s/.test(i))s=!0;else if(s){if(e[r.name]="",r={name:"",value:""},s=!1,a="name",!/[\w-]/.test(i))throw new Error("'"+i+"' is not a valid attribute name character");r.name+=i}else{if(!/[\w-]/.test(i))throw new Error("'"+i+"' is not a valid attribute name character");r.name+=i}break;case"equals":/\s/.test(i)||(/["']/.test(i)?(l=i,a="value"):(r.value+=i,a="value"));break;case"value":if(l)if("\\"===i)if(t.length>n+1){var u=t[n+1];switch(u){case"\\":case"'":case'"':r.value+=u,n++;break;default:r.value+=i}}else r.value+=i;else i===l?(l=!1,e[r.name]=r.value,r={name:"",value:""},a="next"):r.value+=i;else if("\\"===i)if(t.length>n+1){var v=t[n+1];switch(v){case"\\":r.value+=v,n++;break;default:r.value+=i}}else r.value+=i;else/\s/.test(i)?(e[r.name]=r.value,r={name:"",value:""},a="next"):r.value+=i;break;case"next":if(/[\w-]/.test(i))s=!1,r.name+=i,a="name";else if(/[^\s]/.test(i))throw new Error("'"+i+"' is not a valid attribute name character");break;default:throw new Error("'"+a+"' is an invalid token")}else r.name&&(e[r.name]=r.value)}return e}function s(e){for(var s={tag:"div",id:null,classes:[],attrs:{},text:""},r={type:"tag",value:""},n=0;n<=e.length;n++){var i=null;switch(n<e.length&&(i=e[n]),r.type){case"whitespace":i&&/\S/.test(i)&&(r=a(i));break;case"tag":if("\\"===i)if(e.length>n+1){var u=e[n+1];"\\"===u||t(u)&&/\S/.test(u)?(r.value+=u,n++):r.value+=i}else r.value+=i;else if(i&&!t(i))r.value+=i;else{if(r.value){if(/^[0-9]/.test(r.value))throw new Error("Tag cannot start with a number.");s.tag=r.value}r=a(i)}break;case"id":if("\\"===i)if(e.length>n+1){var v=e[n+1];"\\"===v||t(v)&&/\S/.test(v)?(r.value+=v,n++):r.value+=i}else r.value+=i;else if(i&&!t(i))r.value+=i;else{if(!r.value)throw new Error("id cannot be empty");if(s.id)throw new Error("cannot have multiple ids");s.id=r.value,r=a(i)}break;case"class":if("\\"===i)if(e.length>n+1){var c=e[n+1];"\\"===c||t(c)&&/\S/.test(c)?(r.value+=c,n++):r.value+=i}else r.value+=i;else if(i&&!t(i))r.value+=i;else{if(!r.value)throw new Error("class cannot be empty");s.classes.push(r.value),r=a(i)}break;case"attrs":if(null===i)throw new Error("missing ']' at end of attributes token");if("\\"===i)if(e.length>n+1){var o=e[n+1];switch(o){case"\\":r.value+="\\\\",n++;break;case"]":r.value+=o,n++;break;default:r.value+=i}}else r.value+=i;else/[^\]]/.test(i)?r.value+=i:(l(s.attrs,r.value),r={type:"next"});break;case"text":if(null===i)throw new Error("missing '}' at end of text token");if("\\"===i)if(e.length>n+1){var f=e[n+1];switch(f){case"\\":case"}":r.value+=f,n++;break;default:r.value+=i}}else r.value+=i;else/[^}]/.test(i)?r.value+=i:(s.text+=r.value,r={type:"next"});break;case"next":i&&(r=a(i));break;default:throw new Error("'"+r.type+"' is not a valid token type")}}return s}function r(t,a){void 0===t||null===t?t="":"function"==typeof t&&(t=t.call(this)),t=(""+t).trim();var l=s(t),r=e.createElement(l.tag);if(l.id&&r.setAttribute("id",l.id),l.classes.length>0&&r.classList.add.apply(r.classList,l.classes),l.attrs)for(var n in l.attrs)r.setAttribute(n,l.attrs[n]);return l.text&&(r.textContent=l.text),this instanceof HTMLElement&&this.appendChild(r),a?this:r}HTMLElement.prototype.el=r,e.el=r}(document);