!function(e){function t(e){return/[#.[{\s]/.test(e)}function a(e){if(/\s/.test(e))return{type:"whitespace"};switch(e){case null:return;case"#":return{type:"id",value:""};case".":return{type:"class",value:""};case"[":return{type:"attrs",value:""};case"{":return{type:"text",value:""};default:throw new Error("'"+e+"' is not a valid start of a token")}}function l(e,t){t=t.trim();for(var a="next",l=!1,s=!1,r={name:"",value:""},n=0;n<=t.length;n++){var i=null;if(n<t.length)switch(i=t[n],a){case"name":if("="===i)a="equals",s=!1;else if(/\s/.test(i))s=!0;else if(s){if(e[r.name]="",r={name:"",value:""},s=!1,a="name",!/[\w-]/.test(i))throw new Error("'"+i+"' is not a valid attribute name character");r.name+=i}else{if(!/[\w-]/.test(i))throw new Error("'"+i+"' is not a valid attribute name character");r.name+=i}break;case"equals":/\s/.test(i)||(/["']/.test(i)?(l=i,a="value"):(r.value+=i,a="value"));break;case"value":if(l)if("\\"===i)if(t.length>n+1){var u=t[n+1];switch(u){case"\\":case"'":case'"':r.value+=u,n++;break;default:r.value+=i}}else r.value+=i;else i===l?(l=!1,e[r.name]=r.value,r={name:"",value:""},a="next"):r.value+=i;else if("\\"===i)if(t.length>n+1){var v=t[n+1];switch(v){case"\\":r.value+=v,n++;break;default:r.value+=i}}else r.value+=i;else/\s/.test(i)?(e[r.name]=r.value,r={name:"",value:""},a="next"):r.value+=i;break;case"next":if(/[\w-]/.test(i))s=!1,r.name+=i,a="name";else if(/[^\s]/.test(i))throw new Error("'"+i+"' is not a valid attribute name character");break;default:throw new Error("'"+a+"' is an invalid token")}else r.name&&(e[r.name]=r.value)}return e}function s(e){for(var s={tag:"div",id:null,classes:[],attrs:{},text:""},n={type:"tag",value:""},i=0;i<=e.length;i++){var u=null;switch(i<e.length&&(u=e[i]),n.type){case"whitespace":u&&/\S/.test(u)&&(n=a(u));break;case"tag":if("\\"===u)if(e.length>i+1){var v=e[i+1];"\\"===v||t(v)&&/\S/.test(v)?(n.value+=v,i++):n.value+=u}else n.value+=u;else if(u&&!t(u))n.value+=u;else{if(n.value){if(/^[0-9]/.test(n.value))throw new Error("Tag cannot start with a number.");s.tag=n.value}n=a(u)}break;case"id":if("\\"===u)if(e.length>i+1){var c=e[i+1];"\\"===c||t(c)&&/\S/.test(c)?(n.value+=c,i++):n.value+=u}else n.value+=u;else if(u&&!t(u))n.value+=u;else{if(!n.value)throw new Error("id cannot be empty");if(s.id)throw new Error("cannot have multiple ids");s.id=n.value,n=a(u)}break;case"class":if("\\"===u)if(e.length>i+1){var f=e[i+1];"\\"===f||t(f)&&/\S/.test(f)?(n.value+=f,i++):n.value+=u}else n.value+=u;else if(u&&!t(u))n.value+=u;else{if(!n.value)throw new Error("class cannot be empty");s.classes.push(n.value),n=a(u)}break;case"attrs":if(null===u)throw new Error("missing ']' at end of attributes token");if("\\"===u)if(e.length>i+1){var o=e[i+1];switch(o){case"\\":n.value+="\\\\",i++;break;case"]":n.value+=o,i++;break;default:n.value+=u}}else n.value+=u;else/[^\]]/.test(u)?n.value+=u:(l(s.attrs,n.value),n={type:"next"});break;case"text":if(null===u)throw new Error("missing '}' at end of text token");if("\\"===u)if(e.length>i+1){var h=e[i+1];switch(h){case"\\":case"}":n.value+=h,i++;break;default:n.value+=u}}else n.value+=u;else/[^}]/.test(u)?n.value+=u:(s.text+=n.value,n={type:"next"});break;case"next":u&&(n=a(u));break;default:throw new Error("'"+n.type+"' is not a valid token type")}}return r}function r(t,a){void 0===t||null===t?t="":"function"==typeof t&&(t=t.call(this)),t=(""+t).trim();var l=s(t),n=e.createElement(l.tag);if(l.id&&n.setAttribute("id",l.id),l.classes.length>0&&n.classList.add.call(n,l.classes),l.attrs)for(var i in l.attrs)n.setAttribute(i,l.attrs[i]);return l.text&&(n.textContent=l.text),n.el=r,this instanceof HTMLElement&&this.appendChild(n),a?this:n}e.el=r}(document);